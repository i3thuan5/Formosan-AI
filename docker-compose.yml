services:   
  asr:
    image: registry.hf.space/formospeech-formosan-asr:latest
    command: python app.py
    expose:
      - 7860
    volumes:
      - "./model_cache:/home/user/.cache:rw"
    networks:
      - default
      - nginx-bridge
    environment:
      - VIRTUAL_HOST=${VIRTUAL_HOST:-sujiphuat.ithuan.tw}
      - LETSENCRYPT_HOST=${VIRTUAL_HOST:-sujiphuat.ithuan.tw}
      - LETSENCRYPT_EMAIL=ithuan@ithuan.tw
    restart: always

networks:
  nginx-bridge:
    external: true
